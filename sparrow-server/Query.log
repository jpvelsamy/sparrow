CREATE DATABASE spw_audit;

use spw_audit;

CREATE TABLE `command_audit` (
	`command_id` INT(11) NOT NULL AUTO_INCREMENT,

	`instance_id` INT(11) NULL DEFAULT '0',
	`start` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,

	`end` DATETIME NULL DEFAULT NULL,
	`action_name` VARCHAR(150) NULL DEFAULT NULL,

	`process_name` VARCHAR(150) NULL DEFAULT NULL,
	`command_config` TEXT NULL DEFAULT NULL,

	`status` SMALLINT(6) NULL DEFAULT NULL,
	PRIMARY KEY (`command_id`)
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB
;

CREATE TABLE `instance_audit` (
	`instance_id` INT(11) NOT NULL AUTO_INCREMENT,
	`instance_name` VARCHAR(150) NOT NULL DEFAULT '0',

	`mode` VARCHAR(100) NOT NULL DEFAULT '0',
	`start` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
	`end` DATETIME NULL DEFAULT NULL,

	`hostname` VARCHAR(50) NULL DEFAULT NULL,
	`file` VARCHAR(500) NULL DEFAULT NULL,
	`status` SMALLINT(6) NULL DEFAULT NULL,

	`context_log` TEXT NULL DEFAULT NULL,
	`root_ref_id` INT(11) NULL DEFAULT NULL,

	PRIMARY KEY (`instance_id`)
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB;

CREATE TABLE `statement_audit` (
	`statement_id` INT(11) NOT NULL AUTO_INCREMENT,
	`action_id` INT(11) NULL DEFAULT '0',

	`action_name` VARCHAR(50) NULL DEFAULT '0',
	`process_name` VARCHAR(50) NULL DEFAULT '0',
	`start` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,

	`end` DATETIME NULL DEFAULT NULL,
	`rows_written` INT(11) NULL DEFAULT NULL,
	`statement_config` TEXT NULL DEFAULT NULL,

	`rows_read` INT(11) NULL DEFAULT NULL,
	`status` SMALLINT(6) NULL DEFAULT NULL,
	
	PRIMARY KEY (`statement_id`)
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB;

CREATE DATABASE spw_config;

use spw_config;

CREATE TABLE `spw_common_config` (
	`variable` VARCHAR(150) NULL DEFAULT NULL,
	`value` VARCHAR(500) NULL DEFAULT NULL,
	`active` ENUM('Y','N') NULL DEFAULT NULL
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB
;

CREATE TABLE `spw_instance_config` (
	`instance` VARCHAR(150) NULL DEFAULT NULL,
	`process` VARCHAR(150) NULL DEFAULT NULL,
	`variable` VARCHAR(150) NULL DEFAULT NULL,
	`value` VARCHAR(500) NULL DEFAULT NULL,
	`active` ENUM('Y','N') NULL DEFAULT NULL
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB;

CREATE TABLE `spw_process_config` (
	`process` VARCHAR(150) NULL DEFAULT NULL,
	`variable` VARCHAR(150) NULL DEFAULT NULL,
	`value` VARCHAR(500) NULL DEFAULT NULL,
	`active` ENUM('Y','N') NULL DEFAULT NULL
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB;

CREATE TABLE `spw_resource_config` (
	`id` INT(11) NOT NULL AUTO_INCREMENT,
	`config_type` VARCHAR(50) NULL DEFAULT NULL,
	`config_name` VARCHAR(50) NULL DEFAULT NULL,
	`auth_info` VARCHAR(1000) NULL DEFAULT NULL,
	`resource_url` VARCHAR(1000) NULL DEFAULT NULL,
	`active` ENUM('Y','N') NULL DEFAULT NULL,
	`created_date` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
	PRIMARY KEY (`id`)
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB
AUTO_INCREMENT=3;

REPLACE INTO `spw_resource_config` (`id`, `config_type`, `config_name`, `auth_info`, `resource_url`, `active`, `created_date`) VALUES (1, '1', 'oltp/chimera-intg', '{ "user": "root", "password": "password"}', 'jdbc:mysql://localhost:3306/chimera_integration?useUnicode=true&characterEncoding=utf8&dumpQueriesOnException=true', 'Y', '2017-09-24 17:22:05');
REPLACE INTO `spw_resource_config` (`id`, `config_type`, `config_name`, `auth_info`, `resource_url`, `active`, `created_date`) VALUES (2, '1', 'audit/chimera-audit', '{ "user": "root", "password": "password"}', 'jdbc:mysql://localhost:3306/spw_audit?useUnicode=true&characterEncoding=utf8&dumpQueriesOnException=true', 'Y', '2017-09-24 18:42:29');

REPLACE INTO `spw_process_config` (`process`, `variable`, `value`, `active`) VALUES ('inbound.jlgcollection.process', 'filepath', 'inbound.jlgcollection.process.spw', 'Y');
REPLACE INTO `spw_process_config` (`process`, `variable`, `value`, `active`) VALUES ('inbound.jlgcollection.process', 'integration-db', 'oltp/chimera-intg', 'Y');
REPLACE INTO `spw_process_config` (`process`, `variable`, `value`, `active`) VALUES ('outbound.jlgcollection.process', 'integration-schema', 'chimera_integration', 'Y');
REPLACE INTO `spw_process_config` (`process`, `variable`, `value`, `active`) VALUES ('outbound.jlgcollection.process', 'lms-schema', 'mifostenant-default', 'Y');
REPLACE INTO `spw_process_config` (`process`, `variable`, `value`, `active`) VALUES ('outbound.jlgcollection.process', 'filepath', 'outbound.jlgcollection.process.spw', 'Y');
REPLACE INTO `spw_process_config` (`process`, `variable`, `value`, `active`) VALUES ('outbound.jlgcollection.process', 'integration-db', 'oltp/chimera-intg', 'Y');

REPLACE INTO `spw_common_config` (`variable`, `value`, `active`) VALUES ('basepath', 'root', 'Y');
REPLACE INTO `spw_common_config` (`variable`, `value`, `active`) VALUES ('runmode', 'single', 'Y');
REPLACE INTO `spw_common_config` (`variable`, `value`, `active`) VALUES ('audit', 'audit/chimera-audit', 'Y');
REPLACE INTO `spw_common_config` (`variable`, `value`, `active`) VALUES ('integration-db','oltp/chimera-intg','Y');
REPLACE INTO `spw_common_config` (`variable`, `value`, `active`) VALUES ('integration-schema','chimera_integration','Y');
REPLACE INTO `spw_common_config` (`variable`, `value`, `active`) VALUES ('lms-schema','mifostenant-default','Y');
REPLACE INTO `spw_common_config` (`variable`, `value`, `active`) VALUES ('json.storagepath', '/var/lib/mysql/chimera_integration', 'Y');

REPLACE INTO `spw_instance_config` (`instance`, `process`, `variable`, `value`, `active`) VALUES ('publish.demandforecast.process#1', 'publish.demandforecast.process', 'lms', 'oltp/chimera-intg', 'Y');
REPLACE INTO `spw_instance_config` (`instance`, `process`, `variable`, `value`, `active`) VALUES ('test.callprocess.process#1', 'test.callprocess.process', 'lms', 'oltp/chimera-intg', 'Y');
REPLACE INTO `spw_instance_config` (`instance`, `process`, `variable`, `value`, `active`) VALUES ('test.rest.process#1', 'test.rest.process', 'lms', 'oltp/chimera-intg', 'Y');
REPLACE INTO `spw_instance_config` (`instance`, `process`, `variable`, `value`, `active`) VALUES ('test.doozle.process#1', 'test.doozle.process', 'lms', 'oltp/chimera-intg', 'Y');